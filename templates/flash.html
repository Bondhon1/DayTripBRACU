<div id="flash-messages">
  {% with messages = get_flashed_messages(with_categories=true) %}
    {% if messages %}
      {% for category, message in messages %}
        <div class="flash {{ category }}">
          {{ message }}
          <span class="close">&times;</span>
        </div>
      {% endfor %}
    {% endif %}
  {% endwith %}
</div>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    const flashes = document.querySelectorAll("#flash-messages .flash");

    flashes.forEach(flash => {
      // Auto-remove after 4 seconds
      setTimeout(() => {
        flash.style.transition = "opacity 0.5s, transform 0.5s";
        flash.style.opacity = 0;
        flash.style.transform = "translateX(100%)";
        setTimeout(() => flash.remove(), 500);
      }, 4000);

      // Close button click
      flash.querySelector(".close").addEventListener("click", () => {
        flash.remove();
      });
    });
  });
</script>
